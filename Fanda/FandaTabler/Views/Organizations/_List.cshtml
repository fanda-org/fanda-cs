@model Fanda.Repository.Base.PagedResponse<OrgYearListDto>

@if (Model == null)
{
    <p class="ml-auto align-content-center text-center mt-4">Error occured. Please contact system administrators.</p>
    <p class="ml-auto align-content-center text-center text-danger">@ViewBag.Error</p>
}
else
{
    <div class="page-info">
        <input type="hidden" asp-for="Page" />
        <input type="hidden" asp-for="PageCount" />
        <input type="hidden" asp-for="FirstRowOnPage" />
        <input type="hidden" asp-for="LastRowOnPage" />
        <input type="hidden" asp-for="ItemsCount" />
    </div>
    @if (Model.Data != null && Model.ItemsCount > 0)
    {
        @foreach (var org in Model.Data)
        {
            <div class="card card-hover mb-3">
                @if (org.IsSelected)
                {
                    <div class="card-status-top bg-primary"></div>
                }
                <div class="row">
                    <div class="col-md-3">
                        @* col-xl-3 col-lg-4 col-md-6 col-sm-7 *@
                        <span class="form-imagecheck">
                            <input id="active-@org.Id" @(org.Active.HasValue && (bool)org.Active ? "checked" : "") type="checkbox" class="form-imagecheck-input" readonly disabled />
                            <span class="form-imagecheck-figure">
                                <img src="~/static/photos/9f36332564ca271d.jpg" alt="Organization logo" class="form-imagecheck-image w-100 h-100 object-cover">
                            </span>
                        </span>
                    </div>

                    <div class="col">
                        <div class="card-body">
                            <h3 class="card-title">@org.Code <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-md" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" /><line x1="3" y1="12" x2="3" y2="12.01" /><line x1="7" y1="12" x2="17" y2="12" /><line x1="21" y1="12" x2="21" y2="12.01" /></svg> @org.Name</h3>
                            <div class="card-subtitle">@(string.IsNullOrEmpty(org.Description) ? " " : org.Description)</div>
                            <div class="row align-items-center">
                                <div class="col">
                                    @* col-xl-6 col-md-12 *@
                                    @if (org.Active.HasValue && (bool)org.Active)
                                    {
                                        <form asp-action="Open" method="post">
                                            <input type="hidden" asp-for="@org.Id" id="orgId-@org.Id" />
                                            <div class="input-group">
                                                <select class="form-control"
                                                        asp-for="@org.SelectedYearId" id="yearId-@org.Id"
                                                        asp-items="@(new SelectList(org.AccountYears.OrderByDescending(y => y.Code), "Id", "Code"))">
                                                    <option value="">Choose Year...</option>
                                                </select>
                                                <button type="submit" class="btn btn-outline-primary">
                                                    <i class="fe fe-book-open"></i> Open
                                                </button>
                                            </div>
                                        </form>
                                    }
                                </div>
                                <div class="col-auto float-right text-right">
                                    <div class="dropdown ml-1 position-static">
                                        <button class="btn btn-white btn-icon align-text-top" data-boundary="viewport" data-toggle="dropdown" aria-expanded="false">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" /><circle cx="12" cy="12" r="1" /><circle cx="12" cy="19" r="1" /><circle cx="12" cy="5" r="1" /></svg>
                                        </button>
                                        <div class="dropdown-menu dropdown-menu-right" style="">
                                            <button data-toggle="ajax-modal" data-url="@Url.Action("Edit", new { id = org.Id })" data-id=@org.Id
                                                    class="dropdown-item">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="icon dropdown-item-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" /><path d="M9 7 h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3" /><path d="M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3" /><line x1="16" y1="5" x2="19" y2="8" /></svg>
                                                Edit
                                            </button>
                                            <button data-url="@Url.Action("Delete", new { id = org.Id })" data-mode="delete"
                                                    class="dropdown-item">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="icon dropdown-item-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" /><line x1="4" y1="7" x2="20" y2="7" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>
                                                Delete
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                @*<div class="col mb-2">
                                    <button data-toggle="ajax-modal" data-url="@Url.Action("Edit", new { id = org.Id })" data-id=@org.Id
                                            class="btn btn-white btn-block">
                                        <i class="fe fe-edit-3"></i> Edit
                                    </button>
                                </div>
                                <div class="col mb-2">
                                    <button data-url="@Url.Action("Delete", new { id = org.Id })" data-mode="delete"
                                            class="btn btn-outline-danger btn-block">
                                        <i class="fe fe-trash-2"></i> Delete
                                    </button>
                                </div>*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <p class="ml-auto align-content-center text-center mt-4">No organizations</p>
        <p class="ml-auto align-content-center tex-center text-danger">@ViewBag.Error</p>
    }
}
